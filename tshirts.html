<!doctype html>
<head></head>
<body>

<header>
  <div class="wrap nav">
    <div class="logo"><a href="index.html">mek.</a></div>

    <nav class="menu">
      <a href="tshirts.html">T-Shirts</a>
      <a href="hoodies.html">Hoodies</a>
      <a href="pants.html">Pants</a>
      <a href="jumpers.html">Jumpers</a>
    </nav>

    <div class="tools">
      <a class="toolbtn" href="index.html#shop">Shop</a>
      <a class="toolbtn" href="#cart">üõí</a>
    </div>
  </div>
</header>

<main class="wrap">
  <div class="pagehead">
    <h1>T-Shirts</h1>
    <p>All mek tee designs. Click a design to view details.</p>
  </div>

  <div class="bar">
    <div class="search">
      <span style="opacity:.7">üîç</span>
      <input id="q" type="search" placeholder="Search tees (e.g., frog, wavy, eco)">
    </div>

    <div class="chipset" aria-label="Filters">
      <button class="chip" aria-pressed="false" data-filter="all" type="button">All</button>
      <button class="chip" aria-pressed="false" data-filter="kids" type="button">Kids</button>
      <button class="chip" aria-pressed="false" data-filter="nature" type="button">Nature</button>
      <button class="chip" aria-pressed="false" data-filter="graphic" type="button">Graphic</button>
    </div>
  </div>

  <section class="products" id="grid">

    <!-- Rock Lee Tee (front/back) -->
    <article class="card" data-tags="graphic anime"
             data-name="Rock Lee Tee"
             data-price="$20.00"
             data-link="product-rocklee-tee.html"
             data-front="images/rockleefront.jpg"
             data-back="images/rockleeback.jpg">
      <a class="img" href="product-rocklee-tee.html"
         style="background-image:url('images/rockleefront.jpg')"></a>
      <button class="qv" type="button">Quick view</button>
      <div class="copy">
        <div class="title">Rock Lee Tee</div>
        <div class="meta">Regular Fit ‚Äî 180 GSM</div>
        <div class="price">$20.00</div>
      </div>
    </article>

    <!-- Wu Tang Forever Tee (Green) -->
    <article class="card" data-tags="graphic music"
             data-name="Wu Tang Forever Tee (Green)"
             data-price="$20.00"
             data-link="product-wutang-green.html"
             data-front="images/wutangforevergreen.jpg">
      <a class="img" href="product-wutang-green.html"
         style="background-image:url('images/wutangforevergreen.jpg')"></a>
      <button class="qv" type="button">Quick view</button>
      <div class="copy">
        <div class="title">Wu Tang Forever Tee (Green)</div>
        <div class="meta">Regular Fit ‚Äî 180 GSM</div>
        <div class="price">$20.00</div>
      </div>
    </article>

    <!-- Wu Tang Forever Tee (Blue) -->
    <article class="card" data-tags="graphic music"
             data-name="Wu Tang Forever Tee (Blue)"
             data-price="$20.00"
             data-link="product-wutang-blue.html"
             data-front="images/wutangforeverblue.jpg">
      <a class="img" href="product-wutang-blue.html"
         style="background-image:url('images/wutangforeverblue.jpg')"></a>
      <button class="qv" type="button">Quick view</button>
      <div class="copy">
        <div class="title">Wu Tang Forever Tee (Blue)</div>
        <div class="meta">Regular Fit ‚Äî 180 GSM</div>
        <div class="price">$20.00</div>
      </div>
    </article>

    <!-- Section 8 Tee -->
    <article class="card" data-tags="graphic street"
             data-name="Section 8 Tee"
             data-price="$20.00"
             data-link="product-section8-tee.html"
             data-front="images/section8.jpg">
      <a class="img" href="product-section8-tee.html"
         style="background-image:url('images/section8.jpg')"></a>
      <button class="qv" type="button">Quick view</button>
      <div class="copy">
        <div class="title">Section 8 Tee</div>
        <div class="meta">Regular Fit ‚Äî 180 GSM</div>
        <div class="price">$20.00</div>
      </div>
    </article>

    <!-- Rabbit Tee (Teal) (front/back) -->
    <article class="card" data-tags="graphic animal"
             data-name="Rabbit Tee (Teal)"
             data-price="$20.00"
             data-link="product-rabbit-teal.html"
             data-front="images/rabbittealfront.jpg"
             data-back="images/rabbittealback.jpg">
      <a class="img" href="product-rabbit-teal.html"
         style="background-image:url('images/rabbittealfront.jpg')"></a>
      <button class="qv" type="button">Quick view</button>
      <div class="copy">
        <div class="title">Rabbit Tee (Teal)</div>
        <div class="meta">Regular Fit ‚Äî 180 GSM</div>
        <div class="price">$20.00</div>
      </div>
    </article>

    <!-- Kids Green Frog Tee -->
    <article class="card" data-tags="kids nature frog"
             data-name="Kids Green Frog Tee"
             data-price="$20.00"
             data-link="product-frog-tee.html"
             data-front="images/kidsgreenfrog.jpg">
      <a class="img" href="product-frog-tee.html"
         style="background-image:url('images/kidsgreenfrog.jpg')"></a>
      <button class="qv" type="button">Quick view</button>
      <div class="copy">
        <div class="title">Kids Green Frog Tee</div>
        <div class="meta">Regular Fit ‚Äî 180 GSM</div>
        <div class="price">$20.00</div>
      </div>
    </article>

  </section>
</main>

<!-- ‚úÖ Modal must be INSIDE body -->
<div class="modal" id="qvModal" aria-hidden="true" role="dialog" aria-label="Quick view">
  <div class="box">
    <div class="top">
      <strong id="qvTitle">Quick view</strong>
      <button class="close" id="qvClose" type="button">‚úï</button>
    </div>
    <div class="inner">
      <div class="mimg"><img id="qvImage" src="" alt=""></div>
      <div class="panel">
        <div style="color:var(--muted); font-size:13px; margin-bottom:6px">Regular Fit ‚Äî 180 GSM</div>
        <div style="font-size:18px; font-weight:700" id="qvPrice"></div>
        <div class="thumbs" id="qvThumbs"></div>
        <div class="actions">
          <a class="btn" id="qvView" href="#">View product page</a>
          <button class="btn secondary" id="qvAdd" type="button">Add to cart (demo)</button>
        </div>
        <p id="qvStatus" style="color:var(--muted); font-size:13px; margin-top:10px"></p>
      </div>
    </div>
  </div>
</div>

<!-- ‚úÖ ADD this script right before </body> -->
<script>
  // ---- Search + filter ----
  const q = document.getElementById('q');
  const cards = Array.from(document.querySelectorAll('.card'));
  const chips = Array.from(document.querySelectorAll('.chip'));
  let activeFilter = 'all';

  function apply() {
    const term = (q?.value || '').trim().toLowerCase();
    cards.forEach(card => {
      const text = (card.innerText || '').toLowerCase();
      const tags = (card.dataset.tags || '').toLowerCase();
      const matchesSearch = !term || text.includes(term) || tags.includes(term);
      const matchesFilter = activeFilter === 'all' || tags.includes(activeFilter);
      card.style.display = (matchesSearch && matchesFilter) ? '' : 'none';
    });
  }

  if (q) q.addEventListener('input', apply);

  if (chips.length) {
    chips.forEach(chip => {
      chip.addEventListener('click', () => {
        chips.forEach(c => c.setAttribute('aria-pressed', 'false'));
        chip.setAttribute('aria-pressed', 'true');
        activeFilter = chip.dataset.filter || 'all';
        apply();
      });
    });
    const allChip = chips.find(c => c.dataset.filter === 'all');
    if (allChip) allChip.click();
  } else {
    apply();
  }

  // ---- Hover swap front/back ----
  function setBg(el, url){ el.style.backgroundImage = `url('${url}')`; }

  cards.forEach(card => {
    const imgLink = card.querySelector('.img');
    const front = card.dataset.front;
    const back = card.dataset.back;

    if (!imgLink || !front) return;

    card.addEventListener('mouseenter', () => { if (back) setBg(imgLink, back); });
    card.addEventListener('mouseleave', () => { setBg(imgLink, front); });
  });

  // ---- Quick View Modal ----
  const modal = document.getElementById('qvModal');
  const qvTitle = document.getElementById('qvTitle');
  const qvImage = document.getElementById('qvImage');
  const qvPrice = document.getElementById('qvPrice');
  const qvThumbs = document.getElementById('qvThumbs');
  const qvView = document.getElementById('qvView');
  const qvClose = document.getElementById('qvClose');
  const qvAdd = document.getElementById('qvAdd');
  const qvStatus = document.getElementById('qvStatus');

  let currentItem = null;

  function openModal(item){
    currentItem = item;
    qvStatus.textContent = '';
    qvTitle.textContent = item.name || 'Quick view';
    qvPrice.textContent = item.price || '';
    qvImage.src = item.front || '';
    qvImage.alt = item.name || '';
    qvView.href = item.link || '#';

    qvThumbs.innerHTML = '';
    const imgs = [item.front].filter(Boolean).concat(item.back ? [item.back] : []);
    imgs.forEach(src => {
      const b = document.createElement('button');
      b.className = 'thumb';
      b.type = 'button';
      b.innerHTML = `<img src="${src}" alt="">`;
      b.addEventListener('click', () => { qvImage.src = src; });
      qvThumbs.appendChild(b);
    });

    modal.setAttribute('aria-hidden', 'false');
  }

  function closeModal(){
    modal.setAttribute('aria-hidden', 'true');
    currentItem = null;
  }

  qvClose.addEventListener('click', closeModal);
  modal.addEventListener('click', (e) => { if (e.target === modal) closeModal(); });
  document.addEventListener('keydown', (e) => {
    if (e.key === 'Escape' && modal.getAttribute('aria-hidden') === 'false') closeModal();
  });

  document.querySelectorAll('.qv').forEach(btn => {
    btn.addEventListener('click', () => {
      const card = btn.closest('.card');
      openModal({
        name: card.dataset.name,
        price: card.dataset.price,
        link: card.dataset.link,
        front: card.dataset.front,
        back: card.dataset.back || ''
      });
    });
  });

  // Demo add-to-cart
  qvAdd.addEventListener('click', () => {
    if (!currentItem) return;
    const cart = JSON.parse(localStorage.getItem('cart') || '[]');
    cart.push({
      id: (currentItem.name || 'item').toLowerCase().replace(/\s+/g,'-'),
      name: currentItem.name,
      price: currentItem.price,
      image: currentItem.front,
      qty: 1
    });
    localStorage.setItem('cart', JSON.stringify(cart));
    qvStatus.textContent = 'Added to cart ‚úÖ (demo)';
  });
</script>

</body>
</html>
